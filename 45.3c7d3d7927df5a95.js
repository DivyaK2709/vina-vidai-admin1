"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[45],{45:(v,p,s)=>{s.r(p),s.d(p,{SigninPage:()=>C});var m=s(467),l=s(9417),h=s(2200),g=s(9420),d=s(4262),f=s(4909),n=s(3664),a=s(8728),b=s(5253),M=s(423);let _=(()=>{class i{constructor(e){this.translate=e,this.translate.addLangs(["en","ta"]),this.translate.setDefaultLang("en");const o=localStorage.getItem("appLanguage");if(o)this.translate.use(o);else{const t=this.translate.getBrowserLang();this.translate.use(t&&["en","ta"].includes(t)?t:"en")}}setLanguage(e){this.translate.use(e),localStorage.setItem("appLanguage",e)}getCurrentLanguage(){return this.translate.currentLang||"en"}static#n=this.\u0275fac=function(o){return new(o||i)(a.KVO(f.c$))};static#e=this.\u0275prov=a.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function x(i,P){if(1&i){const e=n.RV6();n.j41(0,"div",15)(1,"ion-list")(2,"ion-item",16),n.bIt("click",function(){a.eBV(e);const t=n.XpG();return a.Njj(t.selectLanguage("en"))}),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-item",16),n.bIt("click",function(){a.eBV(e);const t=n.XpG();return a.Njj(t.selectLanguage("ta"))}),n.EFF(6),n.nI1(7,"translate"),n.k0s()()()}2&i&&(n.R7$(3),n.JRh(n.bMT(4,2,"ENGLISH")),n.R7$(3),n.JRh(n.bMT(7,4,"TAMIL")))}let C=(()=>{class i{constructor(e,o,t,r,c){this.firebaseService=e,this.router=o,this.firestore=t,this.languageService=r,this.toastCtrl=c,this.emailOrUsername="",this.password="",this.fullName="",this.showLanguageMenu=!1}presentToast(e){var o=this;return(0,m.A)(function*(t,r="medium"){yield(yield o.toastCtrl.create({message:t,duration:3e3,position:"bottom",color:r})).present()}).apply(this,arguments)}onSignIn(){var e=this;return(0,m.A)(function*(){if(e.emailOrUsername&&e.password)try{const t=(yield e.firebaseService.signInWithUsernameOrEmail(e.emailOrUsername,e.password,"admins")).user.uid,r=(0,d.H9)(e.firestore,"admins",t);yield(0,d.BN)(r,{fullName:e.fullName},{merge:!0}),yield e.presentToast("\u2705 Sign-in successful!","success"),e.router.navigate(["/tabs"])}catch(o){console.error("Sign-in Error:",o),yield e.presentToast(`\u274c ${o.message}`,"danger")}else e.presentToast("\u26a0\ufe0f Please enter username/email and password","warning")})()}goToSignup(){this.router.navigate(["login"])}toggleLanguageMenu(){this.showLanguageMenu=!this.showLanguageMenu}selectLanguage(e){this.languageService.setLanguage(e),this.showLanguageMenu=!1}static#n=this.\u0275fac=function(o){return new(o||i)(n.rXU(b.f),n.rXU(M.Ix),n.rXU(d._7),n.rXU(_),n.rXU(g.K_))};static#e=this.\u0275cmp=n.VBU({type:i,selectors:[["app-signin"]],decls:27,vars:10,consts:[["signInForm","ngForm"],[1,"signin-bg"],["fill","clear",1,"lang-btn",3,"click"],["class","language-menu",4,"ngIf"],[1,"signin-wrapper"],[1,"signin-card"],[1,"subtitle"],[3,"ngSubmit"],["slot","start","name","person-outline"],["placeholder","Username or Email","name","emailOrUsername","required","",3,"ngModelChange","ngModel"],["slot","start","name","lock-closed-outline"],["placeholder","Password","type","password","name","password","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"login-btn",3,"disabled"],[1,"footer-links"],["fill","clear",3,"click"],[1,"language-menu"],["button","",3,"click"]],template:function(o,t){if(1&o){const r=n.RV6();n.j41(0,"ion-content",1)(1,"ion-button",2),n.bIt("click",function(){return a.eBV(r),a.Njj(t.toggleLanguageMenu())}),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.DNE(4,x,8,6,"div",3),n.j41(5,"div",4)(6,"div",5)(7,"h2"),n.EFF(8,"Welcome Back"),n.k0s(),n.j41(9,"p",6),n.EFF(10,"Login using Username or Email"),n.k0s(),n.j41(11,"form",7,0),n.bIt("ngSubmit",function(){return a.eBV(r),a.Njj(t.onSignIn())}),n.j41(13,"ion-item"),n.nrm(14,"ion-icon",8),n.j41(15,"ion-input",9),n.mxI("ngModelChange",function(u){return a.eBV(r),n.DH7(t.emailOrUsername,u)||(t.emailOrUsername=u),a.Njj(u)}),n.k0s()(),n.j41(16,"ion-item"),n.nrm(17,"ion-icon",10),n.j41(18,"ion-input",11),n.mxI("ngModelChange",function(u){return a.eBV(r),n.DH7(t.password,u)||(t.password=u),a.Njj(u)}),n.k0s()(),n.j41(19,"ion-button",12),n.EFF(20),n.nI1(21,"translate"),n.k0s()(),n.j41(22,"div",13)(23,"p"),n.EFF(24,"Don\u2019t have an account?"),n.k0s(),n.j41(25,"ion-button",14),n.bIt("click",function(){return a.eBV(r),a.Njj(t.goToSignup())}),n.EFF(26,"Create Account"),n.k0s()()()()()}if(2&o){const r=n.sdS(12);n.R7$(2),n.SpI(" \u{1f310} ",n.bMT(3,6,"LANGUAGE")," "),n.R7$(2),n.Y8G("ngIf",t.showLanguageMenu),n.R7$(11),n.R50("ngModel",t.emailOrUsername),n.R7$(3),n.R50("ngModel",t.password),n.R7$(),n.Y8G("disabled",r.invalid),n.R7$(),n.SpI(" ",n.bMT(21,8,"SIGN_IN")," ")}},dependencies:[h.MD,h.bT,g.bv,g.Jm,g.W9,g.iq,g.$w,g.uz,g.nf,g.Gw,l.YN,l.qT,l.BC,l.cb,l.YS,l.vS,l.cV,f.h,f.D9],styles:['@charset "UTF-8";.signin-bg[_ngcontent-%COMP%]{--background: #f7f9fc;color:#333;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;position:relative;overflow:hidden}.lang-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-weight:600;color:#444;font-size:.95rem;z-index:10}.language-menu[_ngcontent-%COMP%]{position:absolute;top:50px;right:15px;width:160px;background:#fff;color:#222;border-radius:10px;box-shadow:0 6px 18px #0000001a;z-index:999;padding:6px 0}.language-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;color:#333;font-weight:500}.signin-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.signin-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:40px 30px;width:90%;max-width:400px;box-shadow:0 8px 25px #0000001a;text-align:center;animation:_ngcontent-%COMP%_fadeInUp .6s ease}.signin-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.9rem;margin-bottom:8px;color:#222;font-weight:700}.subtitle[_ngcontent-%COMP%]{margin-bottom:25px;color:#666;font-size:.95rem}ion-item[_ngcontent-%COMP%]{--background: #f0f3f7;border-radius:12px;margin:10px 0;color:#333;--highlight-color-focused: #0078ff;--padding-start: 10px}ion-input[_ngcontent-%COMP%]{color:#222}ion-input[_ngcontent-%COMP%]::placeholder{color:#999}.login-btn[_ngcontent-%COMP%]{margin-top:25px;background:linear-gradient(135deg,#a8e063,#56ab2f);border-radius:14px;color:#fff;font-weight:700;font-size:1.05rem;padding:12px;transition:all .3s ease-in-out}.footer-links[_ngcontent-%COMP%]{margin-top:20px;text-align:center;color:#444;font-size:.9rem}.footer-links[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:.95rem}ion-button[_ngcontent-%COMP%]{--background: linear-gradient(90deg, #a8e063, #56ab2f);--background-hover: none;--background-activated: none;--color: #ffffff;--border-radius: 8px;--box-shadow: none;--ripple-color: transparent;transition:none}ion-button[_ngcontent-%COMP%]:hover{--background: linear-gradient(90deg, #a8e063, #56ab2f);filter:none}ion-button[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none!important}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.custom-toast[_ngcontent-%COMP%]{--background: #0078ff;--color: #fff;font-weight:600;border-radius:12px;text-align:center;font-size:15px}']})}return i})()}}]);