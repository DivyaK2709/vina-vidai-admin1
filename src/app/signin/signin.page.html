<ion-header>
  <ion-toolbar color="primary">
    <ion-title>{{ 'SIGN_IN' | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="toggleLanguageMenu()" color="light">
        {{ 'LANGUAGE' | translate }}
        <ion-icon name="chevron-down-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- âœ… Language dropdown -->
<div *ngIf="showLanguageMenu" class="language-menu">
  <ion-list>
    <ion-item button (click)="selectLanguage('en')">
      <ion-label>{{ 'ENGLISH' | translate }}</ion-label>
    </ion-item>
    <ion-item button (click)="selectLanguage('ta')">
      <ion-label>{{ 'TAMIL' | translate }}</ion-label>
    </ion-item>
  </ion-list>
</div>

<ion-content class="ion-padding">
  <div class="signin-container">
    <div class="signin-card">
      <h2 class="title">{{ 'SIGN_IN' | translate }}</h2>

      <form #signInForm="ngForm" (ngSubmit)="onSignIn()">
        <ion-item>
          <ion-label position="floating">{{ 'USERNAME' | translate }}</ion-label>
          <ion-input
            type="text"
            [(ngModel)]="fullName"
            name="fullName"
            required
            minlength="3"
            maxlength="15"
            #fullNameInput="ngModel">
          </ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="fullNameInput.invalid && (fullNameInput.dirty || fullNameInput.touched)">
          <p *ngIf="fullNameInput.errors?.['required']">{{ 'USERNAME' | translate }} is required.</p>
          <p *ngIf="fullNameInput.errors?.['minlength']">Minimum 3 characters required.</p>
          <p *ngIf="fullNameInput.errors?.['maxlength']">Maximum 15 characters allowed.</p>
        </ion-text>

        <ion-item>
          <ion-label position="floating">{{ 'EMAIL' | translate }}</ion-label>
          <ion-input
            type="text"
            [(ngModel)]="emailOrUsername"
            name="emailOrUsername"
            required
            #emailOrUsernameInput="ngModel">
          </ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="emailOrUsernameInput.invalid && (emailOrUsernameInput.dirty || emailOrUsernameInput.touched)">
          <p *ngIf="emailOrUsernameInput.errors?.['required']">{{ 'EMAIL' | translate }} is required.</p>
        </ion-text>

        <ion-item>
          <ion-label position="floating">{{ 'PASSWORD' | translate }}</ion-label>
          <ion-input
            type="password"
            [(ngModel)]="password"
            name="password"
            required
            #passwordInput="ngModel">
          </ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)">
          <p *ngIf="passwordInput.errors?.['required']">{{ 'PASSWORD' | translate }} is required.</p>
        </ion-text>

        <ion-button expand="block" type="submit" class="signin-button" [disabled]="signInForm.invalid">
          {{ 'SIGN_IN' | translate }}
        </ion-button>
      </form>

      <div class="signup-link">
        <ion-text>{{ 'DONT_HAVE_ACCOUNT' | translate }}</ion-text>
        <br />
        <ion-button fill="clear" color="primary" (click)="goToSignup()">
          {{ 'CREATE_ACCOUNT' | translate }}
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>
